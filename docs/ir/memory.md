# Память и стек исполнения

- **Базовая страница:** 4 KiB.
- **Размер стека актора:** вычисляется при компиляции, минимум 4 KiB, далее кратно степеням двойки (4 KiB · 2ⁿ). Рантайм запрашивает ровно такой объём под вызов актора.
- **Где лежит стек:** буфер выдаёт общий buddy-аллокатор рантайма (глобальный для IR). Внутри самого стекового буфера нет собственного аллокатора; динамические данные неизвестны на этапе компиляции.
- **Жизненный цикл:** стековый буфер выделяется перед входом в актор и возвращается buddy-аллокатору целиком при выходе. Частичных освобождений нет.
- **Динамические данные:** `alloc_bytes`, list_* и builder-поля получают память из того же buddy-аллокатора (вне стека). Всё выделенное во время вызова освобождается одним возвратом блока/подблоков после завершения актора. (то есть бадди алокарор может работать с меньшими размерами блоков через размер стека допустим 512 байт )
- **Входной payload:** `MessageView` читает поля zero-copy из Cap, без копий в стек.
- **Emit/Builder:** builder хранит ссылки на выделенные блоки (из buddy); `emit_plan` сериализует по Plan в выходной буфер. никаких скрытых копий вне явных операций нет.
