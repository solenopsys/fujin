# Контроль потока — коды 0x20–0x27

| Код (hex) | Команда         | Параметры          | Описание                      |
|-----------|-----------------|--------------------|-------------------------------|
| 0x20      | branch_if_true  | cond_offset, label | Условный переход (если true)  |
| 0x21      | branch_if_false | cond_offset, label | Условный переход (если false) |
| 0x22      | jump            | label              | Безусловный переход           |
| 0x23      | assert          | cond_offset        | Ошибка, если false            |
| 0x24–0x27 | —               | —                  | (резерв)                      |

## Циклы и ограничение по длине

- Бесконечных циклов нет: генератор обязан получать фактическую длину входного массива/строки через `slice_len` и использовать её как верхнюю границу.
- Типовой цикл по массиву:
  1. `slice_len(arr, len_tmp)`
  2. `const_i32 0 → i`
  3. `branch_if_false(i < len_tmp, end)`
  4. `load_elem(arr, i, elem_tmp)`
  5. Тело, далее `i = i + 1`, `jump` к проверке.
- Если длина неизвестна на компиляции, каждое вращение цикла обязано проверять границу `len_tmp` перед `load_elem`/`load_byte`, чтобы не выйти за SliceRef.

## Удалённые операции и их реализация

### Return (возврат из функций)
**Удалёны:** 0x23 `return_value`, 0x24 `return_void`  
**Причина:** В акторной модели Fujin нет синхронных функций с возвратом значения. Все взаимодействия через сообщения.  
**Реализация:** Не требуется. Актор завершается после `emit` или по достижении конца кода.
